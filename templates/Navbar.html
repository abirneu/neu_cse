{% load static %}
{% block content %}
<!-- Navigation -->
<nav class="relative z-[9999] bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white shadow-2xl backdrop-blur-sm">
    <!-- Header --> 
    <header class="bg-gradient-to-r from-gray-50 to-white text-slate-800 border-b border-slate-200">
        <div class="container mx-auto px-4 sm:px-6 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3 sm:space-x-6">
                    <div class="relative flex-shrink-0">
                        <img src="{% static 'images/logo/neulogo.jpg' %}" alt="NeU Logo" 
                             class="logo-img h-16 w-12 sm:h-20 sm:w-16 md:h-24 md:w-20 lg:h-20 lg:w-16   
                              ">
                        
                    </div>
                    <div class="space-y-1 min-w-0 flex-1">
                        <h1 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-emerald-600   leading-tight">
                            Department of Computer Science & Engineering
                        </h1>
                        <p class="text-sm sm:text-base md:text-lg font-medium text-slate-600 transition-colors duration-300 hover:text-emerald-600">
                            <a href="https://neu.ac.bd/" class="inline-flex items-center space-x-2 group">
                                <span>Netrokona University</span>
                                <svg class="w-3 h-3 sm:w-4 sm:h-4 opacity-0 group-hover:opacity-100 transform translate-x-0 group-hover:translate-x-1 transition-all duration-300" 
                                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                                </svg>
                            </a>
                        </p>
                    </div>
                </div>
                <div class="hidden lg:block">

                        <div class="space-y-2">
                            <p class="text-sm font-medium text-slate-700 flex items-center space-x-3">
                                    <i class="fas fa-envelope text-emerald-600"></i>
                                    <span>cse@neu.ac.bd</span>
                            </p>

                            <p class="text-sm font-medium text-slate-700 flex items-center space-x-3">
                                    <i class="fas fa-phone text-emerald-600 text-sm"></i>
                                    <span>+880 2997735015</span>
                            </p>
                        </div>
                    
                </div>
            </div>
        </div>
    </header>
    
    <div class="container mx-auto px-4 py-3">
        <!-- Mobile menu button -->
        <div class="md:hidden flex justify-between items-center">
            <button id="mobile-menu-button" 
                    class="p-3 rounded-lg bg-slate-800/50 backdrop-blur-sm border border-slate-700 hover:bg-slate-700/50 focus:outline-none focus:ring-2 focus:ring-emerald-400 transition-all duration-300">
                <svg class="h-6 w-6 fill-current transition-transform duration-300" viewBox="0 0 24 24">
                    <path id="menu-icon" fill-rule="evenodd" d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0 6h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>
                    <path id="close-icon" class="hidden" fill-rule="evenodd" d="M18.278 16.864a1 1 0 0 1-1.414 1.414l-4.829-4.828-4.828 4.828a1 1 0 0 1-1.414-1.414l4.828-4.829-4.828-4.828a1 1 0 0 1 1.414-1.414l4.829 4.828 4.828-4.828a1 1 0 1 1 1.414 1.414l-4.828 4.829 4.828 4.828z"/>
                </svg>
            </button>
        </div>

        <!-- Desktop menu -->
        <div class="hidden md:flex justify-center items-center w-full">
            <div class="flex items-center bg-slate-800/30 backdrop-blur-md rounded-full px-2 py-1 shadow-xl border border-slate-700/50">
                <!-- Home -->
                <a href="{% url 'home' %}" 
                   class="relative px-6 py-3 mx-1 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group
                          {% if request.path == '/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white hover:bg-slate-700/50{% endif %}">
                    <span class="relative z-10">Home</span>
                    {% if request.path != '/' %}
                    <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                    {% endif %}
                </a>
                
                <!-- About Dropdown -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2
                                   {% if request.path == '/about/' or request.path == '/chairman/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200{% endif %}">
                        <span>About</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        {% if request.path != '/about/' and request.path != '/chairman/' %}
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                        {% endif %}
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-72 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'why_neu_cse' %}?section=why" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-question-circle text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Why NeU CSE?</span>
                                </div>
                            </a>
                            <a href="{% url 'message_from_department' %}?section=dept-message" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-university text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Message from Department</span>
                                </div>
                            </a>
                            <a href="{% url 'message_from_chairman' %}" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-user-tie text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Message from Chairman</span>
                                </div>
                            </a>
                            <a href="{% url 'history_neu_cse' %}?section=history-dept" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-history text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>History of NeU CSE</span>
                                </div>
                            </a>
                            <a href="{% url 'mission_vision' %}" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-bullseye text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Mission and Vision</span>
                                </div>
                            </a>
                            <a href="{% url 'history_neu' %}" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-landmark text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>History of University</span>
                                </div>
                            </a>
                            <a href="{% url 'achievements' %}?section=achievements" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-trophy text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Achievements</span>
                                </div>
                            </a>
                            <a href="{% url 'facilities' %}" 
                               class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-building text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Facilities</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Academic Dropdown -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2 text-slate-200">
                        <span>Academic</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'academic_programs' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-graduation-cap text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Program</span>
                                </div>
                            </a>
                            <a href="https://neu.ac.bd/admission-2024-2025/" target="_blank" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-door-open text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Admission</span>
                                </div>
                            </a>
                            <a href="{% url 'curriculum' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-book-open text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Curriculum</span>
                                </div>
                            </a>
                            <a href="{% url 'academic_calendar' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-calendar-alt text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Calendar</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Research Dropdown -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2
                                   {% if request.path == '/publications/' or request.path == '/projects/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200{% endif %}">
                        <span>Research</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        {% if request.path != '/publications/' and request.path != '/projects/' %}
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                        {% endif %}
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-56 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'all_publications' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-newspaper text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Publications</span>
                                </div>
                            </a>
                            <a href="{% url 'projects' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-project-diagram text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>Projects</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Notice Dropdown -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2
                                   {% if request.path == '/notices/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200{% endif %}">
                        <span>Notice</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        {% if request.path != '/notices/' %}
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                        {% endif %}
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-60 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'notice_list' %}?type=important" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center group-hover/item:bg-red-200 transition-colors">
                                        <i class="fas fa-exclamation-triangle text-red-600 text-sm"></i>
                                    </div>
                                    <span>Important Notice</span>
                                </div>
                            </a>
                            <a href="{% url 'notice_list' %}?type=latest" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center group-hover/item:bg-blue-200 transition-colors">
                                        <i class="fas fa-bell text-blue-600 text-sm"></i>
                                    </div>
                                    <span>Latest Notices</span>
                                </div>
                            </a>
                            <a href="{% url 'notice_list' %}?type=all" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center group-hover/item:bg-emerald-200 transition-colors">
                                        <i class="fas fa-list text-emerald-600 text-sm"></i>
                                    </div>
                                    <span>All Notices</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                 
                <!-- Faculty and Staff dropdown -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2 text-slate-200">
                        <span>Faculty & Staff</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'active_faculty' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center group-hover/item:bg-green-200 transition-colors">
                                        <i class="fas fa-user-graduate text-green-600 text-sm"></i>
                                    </div>
                                    <span>Active Faculty</span>
                                </div>
                            </a>
                            <a href="{% url 'faculty_on_leave' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center group-hover/item:bg-yellow-200 transition-colors">
                                        <i class="fas fa-clock text-yellow-600 text-sm"></i>
                                    </div>
                                    <span>Faculty (on Leave)</span>
                                </div>
                            </a>
                            <a href="{% url 'past_faculty' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center group-hover/item:bg-gray-200 transition-colors">
                                        <i class="fas fa-history text-gray-600 text-sm"></i>
                                    </div>
                                    <span>Past Faculty</span>
                                </div>
                            </a>
                            <a href="{% url 'ex_chairman' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center group-hover/item:bg-purple-200 transition-colors">
                                        <i class="fas fa-crown text-purple-600 text-sm"></i>
                                    </div>
                                    <span>Ex Chairman</span>
                                </div>
                            </a>
                            <a href="{% url 'officer_and_staff' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center group-hover/item:bg-blue-200 transition-colors">
                                        <i class="fas fa-users text-blue-600 text-sm"></i>
                                    </div>
                                    <span>Officer & Staff</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Alumni -->
                <a href="{% url 'alumni' %}" 
                   class="relative px-6 py-3 mx-1 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group text-slate-200 hover:text-white hover:bg-slate-700/50">
                    <span class="relative z-10">Alumni</span>
                    <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                </a>
                
                <!-- Club -->
                <div class="relative group mx-1">
                    <button class="relative px-6 py-3 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group-hover:text-white group-hover:bg-slate-700/50 flex items-center space-x-2
                                   {% if request.path == '/computer_club/' or request.path == '/programming_club/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200{% endif %}">
                        <span>Club</span>
                        <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                        {% if request.path != '/computer_club/' and request.path != '/programming_club/' %}
                        <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                        {% endif %}
                    </button>
                    <div class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-slate-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-[9999] overflow-hidden">
                        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-4 h-4 bg-white rotate-45 border-l border-t border-slate-200"></div>
                        <div class="p-2">
                            <a href="{% url 'computer_club' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center group-hover/item:bg-blue-200 transition-colors">
                                        <i class="fas fa-laptop-code text-blue-600 text-sm"></i>
                                    </div>
                                    <span>Computer Club</span>
                                </div>
                            </a>
                            <a href="{% url 'programming_club' %}" class="block px-4 py-3 text-slate-700 text-sm font-medium hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 hover:text-emerald-700 rounded-xl transition-all duration-200 group/item">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center group-hover/item:bg-purple-200 transition-colors">
                                        <i class="fas fa-code text-purple-600 text-sm"></i>
                                    </div>
                                    <span>Programming Club</span>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Contact Us -->
                <a href="{% url 'contact_us' %}" 
                   class="relative px-6 py-3 mx-1 rounded-full font-medium text-sm tracking-wide transition-all duration-300 group text-slate-200 hover:text-white hover:bg-slate-700/50">
                    <span class="relative z-10">Contact Us</span>
                    <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 to-teal-500/0 rounded-full opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
                </a>
            </div>
        </div>
        
        <!-- Mobile menu (hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-gradient-to-b from-slate-900 to-slate-800 border-t border-slate-700 max-h-[calc(100vh-140px)] overflow-y-auto scrollbar-custom">
            <div class="px-4 py-4 space-y-2 min-h-0">
                <!-- Home -->
                <a href="{% url 'home' %}" 
                   class="block py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 {% if request.path == '/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white{% endif %}">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-home text-sm"></i>
                        </div>
                        <span>Home</span>
                    </div>
                </a>
                
                <!-- About mobile dropdown -->
                <div class="relative">
                    <button onclick="toggleMobileDropdown('about-mobile-dropdown')" 
                            class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center group
                                   {% if request.path == '/about/' or request.path == '/chairman/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white{% endif %}">
                        <div class="flex items-center space-x-3">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <i class="fas fa-info-circle text-sm"></i>
                            </div>
                            <span>About</span>
                        </div>
                        <svg id="about-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                        </svg>
                    </button>
                    <div id="about-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                        <a href="{% url 'why_neu_cse' %}?section=why" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-question-circle text-emerald-400 text-xs w-4"></i>
                                <span>Why NeU CSE?</span>
                            </div>
                        </a>
                        <a href="{% url 'message_from_department' %}?section=dept-message" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-university text-emerald-400 text-xs w-4"></i>
                                <span>Message from Department</span>
                            </div>
                        </a>
                        <a href="{% url 'message_from_chairman' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-user-tie text-emerald-400 text-xs w-4"></i>
                                <span>Message from Chairman</span>
                            </div>
                        </a>
                        <a href="{% url 'history_neu_cse' %}?section=history-dept" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-history text-emerald-400 text-xs w-4"></i>
                                <span>History of NeU CSE</span>
                            </div>
                        </a>
                        <a href="{% url 'mission_vision' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-bullseye text-emerald-400 text-xs w-4"></i>
                                <span>Mission and Vision</span>
                            </div>
                        </a>
                        <a href="{% url 'history_neu' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-landmark text-emerald-400 text-xs w-4"></i>
                                <span>History of University</span>
                            </div>
                        </a>
                        <a href="{% url 'achievements' %}?section=achievements" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-trophy text-emerald-400 text-xs w-4"></i>
                                <span>Achievements</span>
                            </div>
                        </a>
                        <a href="{% url 'facilities' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                            <div class="flex items-center space-x-3">
                                <i class="fas fa-building text-emerald-400 text-xs w-4"></i>
                                <span>Facilities</span>
                            </div>
                        </a>
                    </div>
                </div>
            
            <!-- Academic mobile dropdown -->
            <div class="relative">
                <button onclick="toggleMobileDropdown('academic-mobile-dropdown')" 
                        class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center text-slate-200 hover:text-white">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-graduation-cap text-sm"></i>
                        </div>
                        <span>Academic</span>
                    </div>
                    <svg id="academic-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="academic-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                    <a href="#" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-graduation-cap text-emerald-400 text-xs w-4"></i>
                            <span>Program</span>
                        </div>
                    </a>
                    <a href="https://neu.ac.bd/admission-2024-2025/" target="_blank" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-door-open text-emerald-400 text-xs w-4"></i>
                            <span>Admission</span>
                        </div>
                    </a>
                    <a href="#" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-book-open text-emerald-400 text-xs w-4"></i>
                            <span>Curriculum</span>
                        </div>
                    </a>
                    <a href="#" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-calendar-alt text-emerald-400 text-xs w-4"></i>
                            <span>Calendar</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Research mobile dropdown -->
            <div class="relative">
                <button onclick="toggleMobileDropdown('research-mobile-dropdown')" 
                        class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center
                               {% if request.path == '/publications/' or request.path == '/projects/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white{% endif %}">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-microscope text-sm"></i>
                        </div>
                        <span>Research</span>
                    </div>
                    <svg id="research-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="research-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                    <a href="{% url 'all_publications' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-newspaper text-emerald-400 text-xs w-4"></i>
                            <span>Publications</span>
                        </div>
                    </a>
                    <a href="{% url 'projects' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-project-diagram text-emerald-400 text-xs w-4"></i>
                            <span>Projects</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Notice mobile dropdown -->
            <div class="relative">
                <button onclick="toggleMobileDropdown('notice-mobile-dropdown')" 
                        class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center
                               {% if request.path == '/notices/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white{% endif %}">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-bell text-sm"></i>
                        </div>
                        <span>Notice</span>
                    </div>
                    <svg id="notice-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="notice-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                    <a href="{% url 'notice_list' %}?type=important" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-exclamation-triangle text-red-400 text-xs w-4"></i>
                            <span>Important Notice</span>
                        </div>
                    </a>
                    <a href="{% url 'notice_list' %}?type=latest" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-bell text-blue-400 text-xs w-4"></i>
                            <span>Latest Notices</span>
                        </div>
                    </a>
                    <a href="{% url 'notice_list' %}?type=all" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-list text-emerald-400 text-xs w-4"></i>
                            <span>All Notices</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Faculty & Staff mobile dropdown -->
            <div class="relative">
                <button onclick="toggleMobileDropdown('faculty-mobile-dropdown')" 
                        class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center text-slate-200 hover:text-white">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-users text-sm"></i>
                        </div>
                        <span>Faculty & Staff</span>
                    </div>
                    <svg id="faculty-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="faculty-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                    <a href="{% url 'active_faculty' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-user-graduate text-green-400 text-xs w-4"></i>
                            <span>Active Faculty</span>
                        </div>
                    </a>
                    <a href="{% url 'faculty_on_leave' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-clock text-yellow-400 text-xs w-4"></i>
                            <span>Faculty (on Leave)</span>
                        </div>
                    </a>
                    <a href="{% url 'past_faculty' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-history text-gray-400 text-xs w-4"></i>
                            <span>Past Faculty</span>
                        </div>
                    </a>
                    <a href="{% url 'ex_chairman' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-crown text-purple-400 text-xs w-4"></i>
                            <span>Ex Chairman</span>
                        </div>
                    </a>
                    <a href="{% url 'officer_and_staff' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-users text-blue-400 text-xs w-4"></i>
                            <span>Officer & Staff</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Alumni -->
            <a href="{% url 'alumni' %}" 
               class="block py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 text-slate-200 hover:text-white">
                <div class="flex items-center space-x-3">
                    <div class="w-6 h-6 flex items-center justify-center">
                        <i class="fas fa-user-friends text-sm"></i>
                    </div>
                    <span>Alumni</span>
                </div>
            </a>
            
            <!-- Club mobile dropdown -->
            <div class="relative">
                <button onclick="toggleMobileDropdown('club-mobile-dropdown')" 
                        class="w-full text-left py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 flex justify-between items-center
                               {% if request.path == '/computer_club/' or request.path == '/programming_club/' %}bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg{% else %}text-slate-200 hover:text-white{% endif %}">
                    <div class="flex items-center space-x-3">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="fas fa-users-cog text-sm"></i>
                        </div>
                        <span>Club</span>
                    </div>
                    <svg id="club-mobile-arrow" class="w-4 h-4 transform rotate-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="club-mobile-dropdown" class="hidden bg-slate-800/50 rounded-xl mt-2 ml-6 overflow-hidden">
                    <a href="{% url 'computer_club' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-laptop-code text-blue-400 text-xs w-4"></i>
                            <span>Computer Club</span>
                        </div>
                    </a>
                    <a href="{% url 'programming_club' %}" class="block py-3 px-4 text-slate-300 text-sm hover:bg-slate-700/50 hover:text-white transition-all duration-200">
                        <div class="flex items-center space-x-3">
                            <i class="fas fa-code text-purple-400 text-xs w-4"></i>
                            <span>Programming Club</span>
                        </div>
                    </a>
                </div>
            </div>
            
            <!-- Contact Us -->
            <a href="{% url 'contact_us' %}" 
               class="block py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 hover:bg-slate-700/50 text-slate-200 hover:text-white">
                <div class="flex items-center space-x-3">
                    <div class="w-6 h-6 flex items-center justify-center">
                        <i class="fas fa-envelope text-sm"></i>
                    </div>
                    <span>Contact Us</span>
                </div>
            </a>
            </div>
        </div>
    </div>
</nav>

<script>
(function() {
    'use strict';
    
    // Cache DOM elements
    let button, menu, menuIcon, closeIcon;
    
    // Lightweight mobile menu toggle
    function initMobileMenu() {
        button = document.getElementById('mobile-menu-button');
        menu = document.getElementById('mobile-menu');
        menuIcon = document.getElementById('menu-icon');
        closeIcon = document.getElementById('close-icon');
        
        if (!button || !menu || !menuIcon || !closeIcon) return;
        
        // Use single event listener with delegation
        button.addEventListener('click', toggleMenu);
        document.addEventListener('click', handleOutsideClick);
    }
    
    // Optimized menu toggle
    function toggleMenu(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const isHidden = menu.classList.contains('hidden');
        
        // Toggle menu visibility
        menu.classList.toggle('hidden', !isHidden);
        menuIcon.classList.toggle('hidden', isHidden);
        closeIcon.classList.toggle('hidden', !isHidden);
        button.classList.toggle('rotate-180', isHidden);
        
        if (!isHidden) {
            closeAllDropdowns();
        }
        
        // Ensure menu is scrollable when opened
        if (isHidden) {
            requestAnimationFrame(() => {
                menu.scrollTop = 0;
            });
        }
    }
    
    // Optimized dropdown toggle
    function toggleMobileDropdown(id) {
        const dropdown = document.getElementById(id);
        if (!dropdown) return;
        
        const arrowId = id.replace('dropdown', 'arrow');
        const arrow = document.getElementById(arrowId);
        const isHidden = dropdown.classList.contains('hidden');
        
        // Close other dropdowns efficiently
        document.querySelectorAll('[id$="-mobile-dropdown"]:not(#' + id + ')').forEach(el => {
            el.classList.add('hidden');
        });
        
        document.querySelectorAll('[id$="-mobile-arrow"]:not(#' + arrowId + ')').forEach(el => {
            el.classList.remove('rotate-180');
        });
        
        // Toggle current dropdown
        dropdown.classList.toggle('hidden', !isHidden);
        if (arrow) {
            arrow.classList.toggle('rotate-180', isHidden);
        }
        
        // Ensure dropdown is visible when opened
        if (isHidden && menu) {
            requestAnimationFrame(() => {
                const dropdownRect = dropdown.getBoundingClientRect();
                const menuRect = menu.getBoundingClientRect();
                
                if (dropdownRect.bottom > menuRect.bottom) {
                    dropdown.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            });
        }
    }
    
    // Lightweight dropdown closer
    function closeAllDropdowns() {
        document.querySelectorAll('[id$="-mobile-dropdown"]').forEach(dropdown => {
            dropdown.classList.add('hidden');
        });
        document.querySelectorAll('[id$="-mobile-arrow"]').forEach(arrow => {
            arrow.classList.remove('rotate-180');
        });
    }
    
    // Optimized outside click handler
    function handleOutsideClick(e) {
        if (!menu || menu.classList.contains('hidden')) return;
        
        if (!menu.contains(e.target) && !button.contains(e.target)) {
            menu.classList.add('hidden');
            menuIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
            button.classList.remove('rotate-180');
            closeAllDropdowns();
        }
    }
    
    // Efficient initialization
    function init() {
        initMobileMenu();
        
        // Make toggleMobileDropdown globally available
        window.toggleMobileDropdown = toggleMobileDropdown;
        
        // Add optimized styles for mobile menu
        const style = document.createElement('style');
        style.textContent = `
            .rotate-180 {
                transform: rotate(180deg);
            }
            
            nav {
                z-index: 9999;
                position: relative;
            }
            
            #mobile-menu {
                -webkit-overflow-scrolling: touch;
                overscroll-behavior: contain;
                scroll-behavior: smooth;
                position: relative;
            }
            
            /* Custom scrollbar for better UX */
            .scrollbar-custom {
                scrollbar-width: thin;
                scrollbar-color: rgba(16, 185, 129, 0.6) transparent;
            }
            
            .scrollbar-custom::-webkit-scrollbar {
                width: 6px;
            }
            
            .scrollbar-custom::-webkit-scrollbar-track {
                background: rgba(51, 65, 85, 0.3);
                border-radius: 3px;
            }
            
            .scrollbar-custom::-webkit-scrollbar-thumb {
                background: rgba(16, 185, 129, 0.6);
                border-radius: 3px;
                transition: background 0.3s ease;
            }
            
            .scrollbar-custom::-webkit-scrollbar-thumb:hover {
                background: rgba(16, 185, 129, 0.8);
            }
            
            /* Smooth transitions */
            .transition-all {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            
            /* Better mobile touch targets */
            @media (max-width: 768px) {
                #mobile-menu a, #mobile-menu button {
                    min-height: 48px;
                    touch-action: manipulation;
                }
                
                #mobile-menu {
                    max-height: calc(100vh - 140px);
                    min-height: 200px;
                }
            }
            
            /* Ensure dropdown content is accessible */
            [id$="-mobile-dropdown"] {
                max-height: none;
                overflow: visible;
            }
        `;
        document.head.appendChild(style);
    }
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();
</script>
{% endblock %}