{% extends 'base.html' %}
{% load custom_filters %}

{% block content %}
<section class="py-8 px-4 md:px-8 lg:px-18 min-h-screen ">
  <div class="max-w-7xl mx-auto">
    
  

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Main Content Area -->
      <div class="lg:col-span-2 space-y-6">
        
        <!-- Project Title & Type -->
        <div class="bg-white rounded-md p-6 border border-gray-100">
          <div class="border-l-4 border-[#02644A] pl-6 mb-4">
            <span class="text-sm font-semibold text-[#02644A] uppercase tracking-wide">
              {{ project.get_project_type_display }}
            </span>
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mt-2 leading-tight">
              {{ project.title }}
            </h1>
          </div>
          
          <!-- Status Badge -->
          <div class="mt-4">
            {% if project.is_ongoing %}
              <span class="inline-flex items-center px-3.5 py-1.5 rounded-full text-sm font-semibold uppercase tracking-wider bg-blue-100 text-blue-800">
                <i class="fas fa-circle-notch fa-spin mr-2"></i>Ongoing
              </span>
            {% else %}
              <span class="inline-flex items-center px-3.5 py-1.5 rounded-full text-sm font-semibold uppercase tracking-wider bg-green-100 text-green-800">
                <i class="fas fa-check-circle mr-2"></i>Completed
              </span>
            {% endif %}
          </div>
        </div>

        <!-- Project Image -->
        {% if project.image %}
        <div class="bg-white rounded-md shadow-sm overflow-hidden ">
            <div class="relative w-full" style="padding-bottom: 56.25%;">
          <img 
            src="{{ project.image.url }}" 
            alt="{{ project.title }}" 
            class="absolute inset-0 w-full h-full object-cover"
          />
          </div>
        </div>
        {% endif %}

        <!-- Project Information Card -->
        <div class="bg-white rounded-lg shadow-sm p-6 border border-gray-100">
          
          <!-- Project Description -->
          <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
              <i class="fas fa-align-left text-[#02644A] mr-3"></i>
              Description
            </h2>
            <div class="h-0.5 bg-gradient-to-r from-[#02644A] to-transparent mb-6"></div>
            <div class="prose prose-slate max-w-none text-gray-700 leading-relaxed">
              {{ project.description|safe }}
            </div>
          </div>

          <!-- Project Outcome -->
          {% if project.outcome %}
          <div class="mb-8 pt-8 border-t border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
              <i class="fas fa-trophy text-[#02644A] mr-3"></i>
              Outcome & Impact
            </h2>
            <div class="h-0.5 bg-gradient-to-r from-[#02644A] to-transparent mb-6"></div>
            <div class="prose prose-slate max-w-none text-gray-700 leading-relaxed">
              {{ project.outcome|safe }}
            </div>
          </div>
          {% endif %}

          <!-- Project Members -->
          {% if project.members.all %}
          <div class="pt-8 border-t border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center">
              <i class="fas fa-users text-[#02644A] mr-3"></i>
              Project Team
            </h2>
            <div class="h-0.5 bg-gradient-to-r from-[#02644A] to-transparent mb-6"></div>
            <div class="space-y-3">
              {% for member in project.members.all %}
              <div class="p-4 rounded-lg border border-gray-200 flex items-center transition-all duration-300 ease-in-out hover:translate-x-1 hover:bg-gray-50">
                <div class="flex-shrink-0 w-12 h-12 bg-[#02644A] rounded-full flex items-center justify-center text-white font-bold text-lg">
                  {{ member.name|first }}
                </div>
                <div class="ml-4">
                  <h3 class="text-lg font-semibold text-gray-900">{{ member.name }}</h3>
                  <p class="text-sm text-gray-600">{{ member.designation }}</p>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
          {% endif %}

        </div>

      </div>

      <!-- Sidebar -->
      <div class="lg:col-span-1">
        <div class="bg-white rounded-lg shadow-sm border border-gray-100 sticky top-6">
          
          <!-- Project Information Header -->
          <div class="bg-gradient-to-r from-[#02644A] to-[#00916a] text-white p-6 rounded-t-lg">
            <h2 class="text-xl font-bold flex items-center">
              <i class="fas fa-info-circle mr-2"></i>
              Project Details
            </h2>
          </div>

          <!-- Project Info Items -->
          <div class="p-6 space-y-5">
            
            <!-- Project Type -->
            <div class="info-item">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center">
                  <i class="fas fa-folder-open text-[#02644A]"></i>
                </div>
                <div class="ml-3 flex-1">
                  <p class="text-xs font-medium text-gray-500 uppercase tracking-wide">Type</p>
                  <p class="mt-1 text-sm font-semibold text-gray-900">{{ project.get_project_type_display }}</p>
                </div>
              </div>
            </div>

            <hr class="border-gray-200">

            <!-- Start Date -->
            <div class="info-item">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center">
                  <i class="fas fa-calendar-plus text-[#02644A]"></i>
                </div>
                <div class="ml-3 flex-1">
                  <p class="text-xs font-medium text-gray-500 uppercase tracking-wide">Start Date</p>
                  <p class="mt-1 text-sm font-semibold text-gray-900">{{ project.start_date|date:"F d, Y" }}</p>
                </div>
              </div>
            </div>

            <hr class="border-gray-200">

            <!-- End Date -->
            <div class="info-item">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center">
                  <i class="fas fa-calendar-check text-[#02644A]"></i>
                </div>
                <div class="ml-3 flex-1">
                  <p class="text-xs font-medium text-gray-500 uppercase tracking-wide">End Date</p>
                  <p class="mt-1 text-sm font-semibold text-gray-900">
                    {% if project.end_date %}
                      {{ project.end_date|date:"F d, Y" }}
                    {% else %}
                      <span class="text-blue-600">Ongoing</span>
                    {% endif %}
                  </p>
                </div>
              </div>
            </div>

            <!-- Funding Agency -->
            {% if project.funding_agency %}
            <hr class="border-gray-200">
            <div class="info-item">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-10 h-10 bg-yellow-50 rounded-lg flex items-center justify-center">
                  <i class="fas fa-building text-[#02644A]"></i>
                </div>
                <div class="ml-3 flex-1">
                  <p class="text-xs font-medium text-gray-500 uppercase tracking-wide">Funding Agency</p>
                  <p class="mt-1 text-sm font-semibold text-gray-900">{{ project.funding_agency }}</p>
                </div>
              </div>
            </div>
            {% endif %}

            <!-- Budget -->
            {% if project.budget %}
            <hr class="border-gray-200">
            <div class="info-item">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-10 h-10 bg-red-50 rounded-lg flex items-center justify-center">
                  <i class="fas fa-money-bill-wave text-[#02644A]"></i>
                </div>
                <div class="ml-3 flex-1">
                  <p class="text-xs font-medium text-gray-500 uppercase tracking-wide">Budget</p>
                  <p class="mt-1 text-sm font-semibold text-gray-900">à§³{{ project.budget|floatformat:2 }}</p>
                </div>
              </div>
            </div>
            {% endif %}

          </div>

          <!-- Back Button -->
          <div class="p-6 pt-0">
            <a href="{% url 'all_projects' %}" 
               class="w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-[#02644A] to-[#00916a] text-white font-semibold rounded-lg hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5">
              <i class="fas fa-arrow-left mr-2"></i>
              Back to Projects
            </a>
          </div>

        </div>
      </div>

    </div>
  </div>
</section>
{% endblock %}